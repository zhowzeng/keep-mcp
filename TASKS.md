# Zettelkasten 支援開發計畫

## Phase 1：架構擴充（筆記類型）
- [x] 撰寫資料庫遷移，新增 `note_type`、`source_reference` 欄位並調整模型。
- [x] 更新 `add_card`／`manage` 驗證與傳輸結構，強制限定筆記類型。
- [x] 擴充單元與整合測試，覆蓋新增欄位與類型轉換案例。
- [x] 更新工具說明文件與 README，解釋新的筆記類型使用方式。

## Phase 2：卡片連結基礎建設
- [ ] 建立 `card_links` 資料表、Repository 與 `LinkService`。
- [ ] 提供建立／移除連結與列出反向連結的 MCP 工具與 API。
- [ ] 在召回與匯出流程中回傳相鄰卡片資訊。
- [ ] 撰寫連結相關的單元與整合測試，確保雙向一致性。

## Phase 3：索引與主題串
- [ ] 定義 `link_type` 規格（例如 `index`, `thread`）並落實資料庫層支援。
- [ ] 實作批次維護介面與查詢 API，支援索引導覽與主題串瀏覽。
- [ ] 擴充 NDJSON 匯出包含連結與 link type。
- [ ] 更新文件，提供索引與主題串的使用教學與範例。

## Phase 4：工作流程自動化
- [ ] 新增「待提煉」檢視與狀態，讓臨時筆記可升級為永久筆記。
- [ ] 提供筆記升級與狀態轉換的 MCP 操作與稽核事件。
- [ ] 建置連結建議機制，利用 Ranking/Duplicate service 提示可關聯的卡片。
- [ ] 撰寫流程測試，涵蓋狀態轉換、稽核紀錄與建議結果。

## Phase 5：導航與洞察
- [ ] 提供反向連結、主題串查詢與圖形／Markdown 匯出工具。
- [ ] 建立筆記健康指標（如孤兒卡片、缺少連結的永久筆記）報表。
- [ ] 與 CLI/文件整合，提供使用者導覽及最佳實務建議。
- [ ] 驗證整體流程並更新最終使用者文件與示範腳本。
